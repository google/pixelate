<mat-toolbar class="main">
  <div class="spacer">
    <button mat-button (click)="uploadFile()">
      <mat-icon>upload_file</mat-icon>
      Open
    </button>

    <div class="divider"></div>

    <button mat-button [matMenuTriggerFor]="saveMenu" *ngIf="canvas.hasImage">
      Save
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
    <mat-menu #saveMenu="matMenu">
      <button mat-menu-item (click)="downloadPng()">
        <mat-icon>download</mat-icon>
        Download image
      </button>
      <button mat-menu-item (click)="copyImage()">
        <mat-icon>content_copy</mat-icon>
        Copy image
      </button>
      <button mat-menu-item (click)="copyUrl()">
        <mat-icon>link</mat-icon>
        Copy link to image
      </button>
      <button mat-menu-item (click)="printAssembly()">
        <mat-icon>print</mat-icon>
        Print assembly guide
      </button>
    </mat-menu>

    <div class="divider" *ngIf="canvas.hasImage"></div>
  </div>

  <nav mat-tab-nav-bar *ngIf="canvas.hasImage">
    <a mat-tab-link (click)="mode = Mode.DRAW" [active]="mode === Mode.DRAW">
      <mat-icon>edit</mat-icon> Draw
    </a>
    <a
      mat-tab-link
      (click)="mode = Mode.ASSEMBLE"
      [active]="mode === Mode.ASSEMBLE"
    >
      <mat-icon>grid_on</mat-icon> Assemble
    </a>
  </nav>

  <div class="spacer-right">
    <a
      mat-button
      href="https://github.com/google/pixelate"
      target="_blank"
      matTooltip="Learn about Pixelate"
    >
      <mat-icon>help_outline</mat-icon>
    </a>
  </div>
</mat-toolbar>

<app-canvas-editor
  #canvas
  [hidden]="mode !== Mode.DRAW || !canvas.hasImage"
></app-canvas-editor>

<h2 *ngIf="!canvas.hasImage">Open, paste, or drop a small pixel art image.</h2>

<app-instructions
  *ngIf="mode === Mode.ASSEMBLE && (canvas.pixels | async) as pixels"
  [pixels]="pixels"
  [background]="isBackgroundColor"
  (toggleBackgroundColor)="toggleBackgroundColor($event)"
></app-instructions>
